<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>VocabHero: Hero Mode</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 40px; }
        .heart { font-size: 24px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>ğŸ”¥ HERO MODE ğŸ”¥</h1>

    <p><strong>Level:</strong> <span id="level">1</span></p>
    <p><strong>Å½ivoty:</strong> <span id="lives">â¤ï¸â¤ï¸â¤ï¸</span></p>
    <p><strong>XP:</strong> <span id="xp">0</span> / <span id="xpTarget">50</span></p>
    <p><strong>ÄŒas:</strong> <span id="timer">30</span> s</p>

    <h2 id="wordDisplay">NaÄÃ­tÃ¡nÃ­...</h2>

    <input type="text" id="answerInput" placeholder="Zadej ÄeskÃ½ pÅ™eklad">
    <button onclick="submitAnswer()">OdpovÄ›dÄ›t</button>

    <p id="feedback"></p>

    <script>
        const wordPools = {
            1: {{ easy_words|safe }},
            2: {{ medium_words|safe }},
            3: {{ hard_words|safe }}
        };
    </script>

    <script>
        let currentLevel = 1;
        let xp = 0;
        let xpPerCorrect = 10;
        const levelXPGoals = { 1: 50, 2: 70, 3: 100 };
        let lives = 3;
        let timer = 30;
        let interval = null;
        let currentIndex = 0;
        let words = wordPools[currentLevel];

        const xpDisplay = document.getElementById("xp");
        const xpTargetDisplay = document.getElementById("xpTarget");
        const levelDisplay = document.getElementById("level");
        const livesDisplay = document.getElementById("lives");
        const timerDisplay = document.getElementById("timer");
        const wordDisplay = document.getElementById("wordDisplay");
        const answerInput = document.getElementById("answerInput");
        const feedback = document.getElementById("feedback");

        function showWord() {
            if (currentIndex >= words.length) {
                feedback.textContent = "ğŸ‰ VÅ¡echna slovÃ­Äka hotovÃ¡! ZÃ­skÃ¡vÃ¡Å¡ bonus XP!";
                xp += 20;
                checkLevelUp();
                return;
            }

            wordDisplay.textContent = "PÅ™eloÅ¾: " + words[currentIndex].english;
            answerInput.value = "";
        }

        function submitAnswer() {
            const userAnswer = answerInput.value.trim().toLowerCase();
            const correctAnswer = words[currentIndex].czech.trim().toLowerCase();

            if (userAnswer === correctAnswer) {
                xp += xpPerCorrect;
                xpDisplay.textContent = xp;
                feedback.textContent = "âœ… SprÃ¡vnÄ›!";
            } else {
                lives--;
                updateLives();
                feedback.textContent = "âŒ Å patnÄ›! SprÃ¡vnÄ› bylo: " + correctAnswer;
            }

            currentIndex++;
            if (lives <= 0) {
                gameOver();
            } else {
                checkLevelUp();
            }
        }

        function checkLevelUp() {
            const goal = levelXPGoals[currentLevel];

            if (xp >= goal) {
                currentLevel++;
                if (currentLevel > 3) {
                    feedback.textContent = "ğŸ† VyhrÃ¡l jsi hru! Gratulace!";
                    clearInterval(interval);
                    answerInput.disabled = true;
                    return;
                }

                feedback.textContent = `â¬†ï¸ LEVEL ${currentLevel}!`;
                levelDisplay.textContent = currentLevel;
                xp = 0;
                xpDisplay.textContent = xp;
                xpTargetDisplay.textContent = levelXPGoals[currentLevel];
                livesDisplay.textContent = "â¤ï¸â¤ï¸â¤ï¸"; 
                lives = 3;
                timer = 30 - (currentLevel * 5);
                timerDisplay.textContent = timer;
                currentIndex = 0;
                words = wordPools[currentLevel];

                clearInterval(interval);
                startTimer();
                showWord();
            } else {
                showWord();
            }
        }

        function updateLives() {
            if (lives === 3) livesDisplay.textContent = "â¤ï¸â¤ï¸â¤ï¸";
            else if (lives === 2) livesDisplay.textContent = "â¤ï¸â¤ï¸ğŸ¤";
            else if (lives === 1) livesDisplay.textContent = "â¤ï¸ğŸ¤ğŸ¤";
            else livesDisplay.textContent = "ğŸ’€ğŸ’€ğŸ’€";
        }

        function startTimer() {
            interval = setInterval(() => {
                timer--;
                timerDisplay.textContent = timer;
                if (timer <= 0) {
                    clearInterval(interval);
                    gameOver();
                }
            }, 1000);
        }

        function gameOver() {
            feedback.textContent = "ğŸ’€ GAME OVER ğŸ’€";
            answerInput.disabled = true;
        }

        window.onload = () => {
            xpTargetDisplay.textContent = levelXPGoals[currentLevel];
            levelDisplay.textContent = currentLevel;
            showWord();
            startTimer();
        };
    </script>
</body>
</html>
